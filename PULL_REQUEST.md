# üé¨ Add Complete Cannes-Level Slogan Generation Pipeline

## Summary

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ-–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è 400 –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö —Å–ª–æ–≥–∞–Ω–æ–≤ —É—Ä–æ–≤–Ω—è Cannes Lions –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ä–ø—É—Å–∞ –∏–∑ ~15K —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ª–æ–≥–∞–Ω–æ–≤.

## Changes

### Core Pipeline (`src/pipeline.py`)
- ‚úÖ 10-—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π –ø–∞–π–ø–ª–∞–π–Ω
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä–ø—É—Å–∞ (RU/EN)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 2500+ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —Å LLM
- ‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –Ω–æ–≤–∏–∑–Ω–∞, –∫–∞—á–µ—Å—Ç–≤–æ)
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ JSONL/CSV/TXT —Ñ–æ—Ä–º–∞—Ç—ã
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –∏ –ª–æ–≥–æ–≤

### Modules

#### `modules/preprocessor.py`
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (HTML entities, –∫–∞–≤—ã—á–∫–∏, –ø—Ä–æ–±–µ–ª—ã)
- –¢–æ—á–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è (MD5 hash)
- –ú—è–≥–∫–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è (SimHash + fuzzy matching)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ª–æ–≥–∞–Ω–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ—Ä–ø—É—Å–∞

#### `modules/embeddings.py`
- FAISS-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- Sentence-transformers embeddings (multilingual MPNET)
- Batch –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–∏–∑–Ω—ã –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–π –±–ª–∏–∑–æ—Å—Ç–∏
- N-gram checker –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥–æ—Å–ª–æ–≤–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤

#### `modules/generator.py`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI GPT-4 –∏ Anthropic Claude
- 12 –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –±—Ä–∏—Ñ–æ–≤ (–º–∏–Ω–∏–º–∞–ª–∏–∑–º, –ø–∞—Ä–∞–¥–æ–∫—Å, –∞–Ω—Ç–∏—Ç–µ–∑–∞, –∏–≥—Ä–∞ —Å–ª–æ–≤ –∏ —Ç.–¥.)
- –ë–∞—Ç—á–µ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- Seed-based reproducibility
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

#### `modules/scorer.py`
- SafetyFilter: regex-based + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è LLM-–ø—Ä–æ–≤–µ—Ä–∫–∞
- StyleScorer: 4 –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (punchiness, wit, clarity, twist)
- –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∏ LLM-based —Å–∫–æ—Ä–∏–Ω–≥
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä–æ–≥–∞–º –∫–∞—á–µ—Å—Ç–≤–∞
- –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ

### Configuration
- `config.yaml` - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
- `.env.example` - —à–∞–±–ª–æ–Ω –¥–ª—è API –∫–ª—é—á–µ–π
- `requirements.txt` - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –≤–µ—Ä—Å–∏—è–º–∏

### Documentation
- –ü–æ–¥—Ä–æ–±–Ω—ã–π `README.md` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≤–æ–¥–∞
- –°–µ–∫—Ü–∏—è –ø–æ –æ—Ç–ª–∞–¥–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –ü—Ä–∏–º–µ—Ä—ã –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Tests
- `tests/test_preprocessor.py` - unit-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- –ü–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

## Pipeline Flow

```
1. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–ø—É—Å–∞ ‚Üí –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ FAISS –∏–Ω–¥–µ–∫—Å–∞ + N-gram –∏–Ω–¥–µ–∫—Å–∞  
3. LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 2500 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (12 –±—Ä–∏—Ñ–æ–≤)
4. Safety —Ñ–∏–ª—å—Ç—Ä (—Ä–µ–≥–µ–∫—Å—ã + —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å)
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–∏–∑–Ω—ã (embedding sim < 0.80 + zero 5-gram overlap)
6. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
7. –°–∫–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ (4 –º–µ—Ç—Ä–∏–∫–∏)
8. –û—Ç–±–æ—Ä Top-400 –ø–æ –≤–∑–≤–µ—à–µ–Ω–Ω–æ–º—É score
9. –≠–∫—Å–ø–æ—Ä—Ç JSONL/CSV/TXT
10. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
```

## Output Formats

### JSONL
```json
{
  "id": "uuid",
  "text": "–°–ª–æ–≥–∞–Ω",
  "lang": "ru",
  "len_words": 4,
  "novelty": {"embed_sim_to_nn": 0.61},
  "style": {
    "punchiness": 0.82,
    "wit": 0.77,
    "clarity": 0.9,
    "twist": 0.65
  },
  "devices": ["–∞–Ω—Ç–∏—Ç–µ–∑–∞"],
  "total_score": 0.785
}
```

### CSV
–ö–æ–ª–æ–Ω–∫–∏: id, text, lang, len_words, embed_sim, punchiness, wit, clarity, twist, total_score

### TXT
–ü—Ä–æ—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≥–∞–Ω–æ–≤ (1 –Ω–∞ —Å—Ç—Ä–æ–∫—É)

## Quality Criteria

### Novelty
- ‚úÖ Embedding similarity < 0.80 –∫ –±–ª–∏–∂–∞–π—à–µ–º—É –≤ –∫–æ—Ä–ø—É—Å–µ
- ‚úÖ Zero 5-gram overlap —Å –∫–æ—Ä–ø—É—Å–æ–º
- ‚úÖ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤

### Style Quality
- ‚úÖ Punchiness ‚â• 0.65 (–ª–∞–∫–æ–Ω–∏—á–Ω–æ—Å—Ç—å, —É–¥–∞—Ä–Ω–æ—Å—Ç—å)
- ‚úÖ Wit ‚â• 0.60 (–æ—Å—Ç—Ä–æ—É–º–∏–µ, –∏–≥—Ä–∞ —Å–ª–æ–≤)
- ‚úÖ Clarity ‚â• 0.70 (—è—Å–Ω–æ—Å—Ç—å, –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—å)
- ‚úÖ Twist ‚â• 0.50 (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–≤–æ—Ä–æ—Ç)

### Content Safety
- ‚úÖ –ù–µ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö/–ø—Ä–∞–≤–æ–≤—ã—Ö –æ–±–µ—â–∞–Ω–∏–π
- ‚úÖ –ù–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–π —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏
- ‚úÖ –ù–µ—Ç —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏/–¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏–∏
- ‚úÖ –ù–µ—Ç –±—Ä–µ–Ω–¥–æ–≤ –∏ —Å–∏–º–≤–æ–ª–æ–≤ ¬Æ‚Ñ¢¬©

## Technical Details

- **Language**: Python 3.9+
- **LLM**: OpenAI GPT-4 / Anthropic Claude
- **Embeddings**: sentence-transformers (768-dim multilingual)
- **Vector DB**: FAISS (IndexFlatIP for cosine similarity)
- **NLP**: RapidFuzz, spaCy, NLTK
- **Config**: YAML-based with environment variables
- **Reproducibility**: Fixed seed, versioned dependencies

## Usage

```bash
# Setup
pip install -r requirements.txt
cp .env.example .env
# Edit .env with API keys

# Run
cd src
python pipeline.py
```

## Files Changed

```
+ .env.example
+ .gitignore
+ README.md
+ config.yaml
+ requirements.txt
+ src/__init__.py
+ src/pipeline.py
+ src/modules/__init__.py
+ src/modules/preprocessor.py
+ src/modules/embeddings.py
+ src/modules/generator.py
+ src/modules/scorer.py
+ tests/__init__.py
+ tests/test_preprocessor.py
```

**Total**: 14 files, 2082 insertions(+)

## Testing

Unit tests –¥–ª—è –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ª–æ–≥–∞–Ω–æ–≤  
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- ‚úÖ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –¢–æ—á–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç—Ä–µ–±—É—é—Ç—Å—è API –∫–ª—é—á–∏, –ø–æ—ç—Ç–æ–º—É end-to-end —Ç–µ—Å—Ç—ã –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã.

## Dependencies

–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω—ã –≤ `requirements.txt`:
- openai, anthropic (LLM APIs)
- sentence-transformers, transformers, torch (embeddings)
- faiss-cpu (vector search)
- pandas, numpy (data processing)
- jsonlines (export)
- rapidfuzz (fuzzy matching)
- python-dotenv, pyyaml (config)

## Cost Estimate

–ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω —Å GPT-4:
- ~100 API calls √ó 25 slogans/call
- –ü—Ä–∏–º–µ—Ä–Ω–æ $5-15 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–µ–ª–∏

## Next Steps

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ unit-—Ç–µ—Å—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Annoy –∏–Ω–¥–µ–∫—Å –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É FAISS
- [ ] –î–æ–±–∞–≤–∏—Ç—å CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å argparse
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å detoxify –¥–ª—è —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏
- [ ] LLM-based –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥ (—Å–µ–π—á–∞—Å —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π)
- [ ] Web UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤

## Checklist

- [x] –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README) —Å–æ–∑–¥–∞–Ω–∞
- [x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ YAML
- [x] Unit-—Ç–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] .gitignore –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ README
- [x] –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω
- [x] –í–µ—Ç–∫–∞ feature/cannes-slogan-pipeline —Å–æ–∑–¥–∞–Ω–∞

---

**–ê–≤—Ç–æ—Ä**: Factory AI Droid  
**–î–∞—Ç–∞**: 2025-10-28
